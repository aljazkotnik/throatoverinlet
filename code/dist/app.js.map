{"version":3,"file":"app.js","sources":["../src/support/dragDropHandler.js","../src/app.js"],"sourcesContent":["export default class dragDropHandler{\r\n  constructor(){} // constructor\r\n\r\n  ondragdropped(loadeddata){\r\n\t// Dummy placeholder function.\r\n  } // ondragdropped\r\n  \r\n  \r\n  loadfiles(files){\r\n\t// Loadfiles is a separate function so that it can b calld programatically.\r\n\tlet obj = this;\r\n\t\r\n\t\r\n\t// We don't support dropping in several files - drag-and drop is only temporary.\r\n\tlet file = files[0];\r\n\t\r\n\tlet url;\r\n\tif(file instanceof File){\r\n\t\turl = URL.createObjectURL(file);\r\n\t} else {\r\n\t\turl = file;\r\n\t} // if\r\n\r\n\t\r\n\tfetch( url )\r\n\t  .then(res=>res.json())\r\n\t  .then(json=>{\r\n\t\t  // Now we update the data and the app.\r\n\t\t  obj.ondragdropped(json);\r\n\t  }); // fetch  \r\n  } // loadfiles\r\n  \r\n\t\r\n  ondrop(ev){\r\n    let obj = this;\r\n\t\t\t\t\r\n\t// Prevent default behavior (Prevent file from being opened)\r\n\tev.preventDefault();\r\n\r\n\tvar files = []\r\n\tif (ev.dataTransfer.items) {\r\n\t\tfor (var i = 0; i < ev.dataTransfer.items.length; i++) {\r\n\t\t  // Use DataTransferItemList interface to access the file(s)\r\n\t\t  // If dropped items aren't files, reject them\r\n\t\t  if (ev.dataTransfer.items[i].kind === 'file') {\r\n\t\t\tfiles.push( ev.dataTransfer.items[i].getAsFile() );\r\n\t\t  } // if\r\n\t\t} // for\r\n\t} else {\r\n\t\t// Use DataTransfer interface to access the file(s)\r\n\t\tfiles = ev.dataTransfer.files\r\n\t} // if\r\n\t  \r\n\tobj.loadfiles(files);\r\n\r\n  } // ondrop\r\n\r\n  ondragover(ev){\t\r\n\t// Prevent default behavior (Prevent file from being opened)\r\n\tev.preventDefault();\r\n  } // ondragover\r\n\r\n\r\n} // dragDropHandler","import dragDropHandler from \"./support/dragDropHandler.js\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Instantiate the data.\r\nvar data = undefined;\r\n\r\n\r\n// Updatethe app.\r\nfunction update(){\r\n\tconsole.log(\"Update the app.\", data)\r\n} // update\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet dataLoader = new dragDropHandler();\r\ndataLoader.ondragdropped = function(loadeddata){\r\n\t// This replaces the 'ondragdropped' function of the data loader, which executes whn the new data becomes available.\r\n\tdata = loadeddata;\r\n\tupdate();\r\n} // ondragdropped\r\n\r\n// DRAGGING AND DROPPING THE DATA IS A DEVELOPMENT FEATURE.\r\nlet dragDropArea = document.getElementsByTagName(\"BODY\")[0];\r\ndragDropArea.ondrop = (ev)=>{dataLoader.ondrop(ev)};\r\ndragDropArea.ondragover = (ev)=>{dataLoader.ondragover(ev)};\r\n\r\n// Dev test dataset.\r\ndataLoader.loadfiles([\"./assets/data/M95A60SC80TC4_psi040A95.json\"]);"],"names":["dragDropHandler","loadeddata","files","obj","file","url","File","URL","createObjectURL","fetch","then","res","json","ondragdropped","ev","preventDefault","dataTransfer","items","i","length","kind","push","getAsFile","loadfiles","data","undefined","update","console","log","dataLoader","dragDropArea","document","getElementsByTagName","ondrop","ondragover"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;MAAqBA;+BACN;;;;;;;aAEb,sBAAA,CAAcC,UAAd,EAAyB;;;;;aAKzB,kBAAA,CAAUC,KAAV,EAAgB;;YAEbC,GAAG,GAAG,KAFO;;YAMbC,IAAI,GAAGF,KAAK,CAAC,CAAD;YAEZG;;YACDD,IAAI,YAAYE,MAAK;EACvBD,QAAAA,GAAG,GAAGE,GAAG,CAACC,eAAJD,CAAoBH,IAApBG,CAANF;EADD,aAEO;EACNA,QAAAA,GAAG,GAAGD,IAANC;EAZgB,OAAA;;;EAgBjBI,MAAAA,KAAK,CAAEJ,GAAF,CAALI,CACGC,IADHD,CACQ,UAAAE,GAAA;iBAAKA,GAAG,CAACC,IAAJD;EADb,OAAAF,EAEGC,IAFHD,CAEQ,UAAAG,IAAA,EAAM;;EAEXT,QAAAA,GAAG,CAACU,aAAJV,CAAkBS,IAAlBT;EAJH,OAAAM,EAhBiB;;;;;aAyBhB,eAAA,CAAOK,EAAP,EAAU;YACJX,GAAG,GAAG,KADF;;EAIXW,MAAAA,EAAE,CAACC,cAAHD;YAEIZ,KAAK,GAAG;;YACRY,EAAE,CAACE,YAAHF,CAAgBG,OAAO;eACrB,IAAIC,CAAC,GAAG,GAAGA,CAAC,GAAGJ,EAAE,CAACE,YAAHF,CAAgBG,KAAhBH,CAAsBK,QAAQD,CAAC,IAAI;;;gBAGjDJ,EAAE,CAACE,YAAHF,CAAgBG,KAAhBH,CAAsBI,CAAtBJ,EAAyBM,IAAzBN,KAAkC,QAAQ;EAC/CZ,YAAAA,KAAK,CAACmB,IAANnB,CAAYY,EAAE,CAACE,YAAHF,CAAgBG,KAAhBH,CAAsBI,CAAtBJ,EAAyBQ,SAAzBR,EAAZZ;EAJsD,WAAA;;EAD7B,SAAA;;EAA3B,aAQO;;EAENA,QAAAA,KAAK,GAAGY,EAAE,CAACE,YAAHF,CAAgBZ,KAAxBA;EAjBU,OAAA;;;EAoBXC,MAAAA,GAAG,CAACoB,SAAJpB,CAAcD,KAAdC;;;;;aAIC,mBAAA,CAAWW,EAAX,EAAc;;EAEfA,MAAAA,EAAE,CAACC,cAAHD;;;;;;;;ECnDD,IAAIU,IAAI,GAAGC,SAAX;;EAIA,SAASC,MAAT,GAAiB;EAChBC,EAAAA,OAAO,CAACC,GAARD,CAAY,iBAAZA,EAA+BH,IAA/BG;;;;EAeD,IAAIE,UAAU,GAAG,IAAI7B,eAAJ,EAAjB;;EACA6B,UAAU,CAAChB,aAAXgB,GAA2B,UAAS5B,UAAT,EAAoB;;EAE9CuB,EAAAA,IAAI,GAAGvB,UAAPuB;EACAE,EAAAA,MAAM;EAHP,CAAAG;EAMA;;;EACA,IAAIC,YAAY,GAAGC,QAAQ,CAACC,oBAATD,CAA8B,MAA9BA,EAAsC,CAAtCA,CAAnB;;EACAD,YAAY,CAACG,MAAbH,GAAsB,UAAChB,EAAD,EAAM;EAACe,EAAAA,UAAU,CAACI,MAAXJ,CAAkBf,EAAlBe;EAA7B,CAAAC;;EACAA,YAAY,CAACI,UAAbJ,GAA0B,UAAChB,EAAD,EAAM;EAACe,EAAAA,UAAU,CAACK,UAAXL,CAAsBf,EAAtBe;EAAjC,CAAAC;;;EAGAD,UAAU,CAACN,SAAXM,CAAqB,CAAC,4CAAD,CAArBA;;;;;;"}